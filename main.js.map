{"version":3,"file":"main.js","mappings":"mBACA,IAAMA,EAAkBC,SAASC,cAAc,cACzCC,EAAcH,EAAgBE,cAAc,oBAC5CE,EAAaJ,EAAgBE,cAAc,mBA0CjD,SAASG,IACPD,EAAWE,UAAUC,OAAO,8BAC9B,CAEAJ,EAAYK,iBAAiB,SA5C7B,SAAqBC,GAQrB,IAA6BC,EAPvBD,EAAIE,OAAOC,MAAMC,QAAU,GAOJH,EANLD,EAAIE,OAAOC,MAOjCE,MAAM,+EACHC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,GAAKD,EAAIE,OAASC,QAAQC,OAAOJ,EAAIK,OAAO,IAC5DN,MAAK,SAAAO,GAAI,OAIOC,EAJSD,EAAKE,QAAQD,KAIhBE,EAJsBf,QAKzCgB,EAAeH,EAAKI,QAAO,SAAAC,GAC/B,OAAOA,EAAIC,KAAKC,cAAcC,SAASN,EAAYK,cACrD,MACoBJ,EAAab,OAAS,IACxCT,EAAWE,UAAU0B,IAAI,+BAK7B,SAAoBC,GAClB,KAAO7B,EAAW8B,YAChB9B,EAAW+B,YAAY/B,EAAW8B,YAEpCD,EAAUG,SAAQ,SAAAC,GAChBjC,EAAWkC,mBAAmB,YAAa,wCAAFC,OAA0CF,EAAKR,KAAI,SAC9F,GACF,CAXIW,CAAWd,KANf,IAAqBH,EAAME,EACnBC,CALmD,IACtDe,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAI,YAADL,OAAaG,GAAM,KAR5CrC,GAEJ,IAuCAD,EAAWI,iBAAiB,SAX5B,SAAuBC,GACrBN,EAAYS,MAAQH,EAAIE,OAAOkC,YAC/BxC,IACAsC,QAAQC,IAAI,gDAADL,OAAiD9B,EAAIE,OAAOkC,YAAW,KACpF,IAQA5C,SAASO,iBAAiB,QAASH,E","sources":["webpack://my-advocate/./src/index.js"],"sourcesContent":["import './index.css'\r\nconst searchContainer = document.querySelector('.js-search');\r\nconst searchInput = searchContainer.querySelector('.js-search-input');\r\nconst searchList = searchContainer.querySelector('.js-search-list');\r\n\r\nfunction handleInput(evt) {\r\n  if (evt.target.value.length >= 3) {\r\n    getAutocompliteList(evt.target.value)\r\n  } else {\r\n    closeList();\r\n  }\r\n}\r\n\r\nfunction getAutocompliteList(inputData) {\r\n  fetch('https://api.my-advo.cat/api/search/complete?q=%D1%81%D1%83%D0%B4&target=all')\r\n    .then(res => res.ok ? res.json() : Promise.reject(res.status))\r\n    .then(data => showResults(data.payload.list, inputData))\r\n    .catch(err => console.log(`Ошибка - ${err}`));\r\n}\r\n\r\nfunction showResults(list, searchValue) {\r\n  const resultSearch = list.filter(tag => {\r\n    return tag.tags.toLowerCase().includes(searchValue.toLowerCase());\r\n  })\r\n  if (resultSearch && resultSearch.length > 0) {\r\n    searchList.classList.add('header__search-list_visible');\r\n    addElement(resultSearch);\r\n  }\r\n}\r\n\r\nfunction addElement(arrResult) {\r\n  while (searchList.firstChild) {\r\n    searchList.removeChild(searchList.firstChild);\r\n  }\r\n  arrResult.forEach(item => {\r\n    searchList.insertAdjacentHTML('beforeend', `<li class=\"header__search-list-item\">${item.tags}</li>`);\r\n  })\r\n}\r\n\r\nfunction selectVariant(evt) {\r\n  searchInput.value = evt.target.textContent;\r\n  closeList();\r\n  console.log(`Производится запрос на поиск по выражению - \"${evt.target.textContent}\"`);\r\n}\r\n\r\nfunction closeList() {\r\n  searchList.classList.remove('header__search-list_visible');\r\n}\r\n\r\nsearchInput.addEventListener('input', handleInput);\r\nsearchList.addEventListener('click', selectVariant);\r\ndocument.addEventListener('click', closeList);\r\n\r\n"],"names":["searchContainer","document","querySelector","searchInput","searchList","closeList","classList","remove","addEventListener","evt","inputData","target","value","length","fetch","then","res","ok","json","Promise","reject","status","data","list","payload","searchValue","resultSearch","filter","tag","tags","toLowerCase","includes","add","arrResult","firstChild","removeChild","forEach","item","insertAdjacentHTML","concat","addElement","catch","err","console","log","textContent"],"sourceRoot":""}